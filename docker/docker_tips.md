## docker

### コンテナとは？
ホストマシン上で実行されるサンドボックス化されたプロセス  
コンテナはホストマシンとカーネルを共有しているため、ホストマシンと OS や CPU アーキテクチャを一致させる必要がある

### build 時のキャッシュ
#### Dockerfile の build 概要
Docker は Dockerfile を上から読み込んでビルドを行う  
1 行ごとにイメージレイヤを作成していき、最終的に全てのイメージレイヤを合わせることで Docker イメージを作成する  

#### build のキャッシュ
Dockerfile の命令に変更がない、かつ構築済みのイメージがあれば新たにイメージを作成しない  
その場合は、ビルドにかかる時間を短縮できる  
Dockerfile の命令に変更がある場合は、変更がある命令以降のレイヤについて、新たにイメージが構築される  
従って、更新頻度の少ない命令を Dockerfile の上の方に書いておくと良い  

なお、命令に変更はないが、キャッシュを使用したくない場合は --no-cache オプションを付与することでキャッシュが使用されなくなる
